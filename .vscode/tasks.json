{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Build nightly",
			"type": "process",
			"command": "cargo",
			"args": [
				"+nightly",
				"build",
				"--release",
				"--features",
				"nightly",
				"-Z",
				"build-std=std,panic_abort",
				"-Z",
				"build-std-features=panic_immediate_abort"
			],
			"options": {
				"env": {
					"RUSTFLAGS": "-Z virtual-function-elimination -C lto -C target-feature=+bulk-memory,+mutable-globals,+nontrapping-fptoint,+sign-ext,+simd128,+multivalue"
				}
			},
			"problemMatcher": [
				"$rustc"
			]
		},
		{
			"label": "Build stable",
			"type": "process",
			"command": "cargo",
			"args": [
				"b"
			],
			"problemMatcher": [
				"$rustc"
			]
		},
		{
			"label": "Debug stable",
			"type": "process",
			"problemMatcher": [],
			// Install the asr-debugger with:
			// cargo install --git https://github.com/CryZe/asr-debugger
			"command": "asr-debugger",
			"args": [
				"target${pathSeparator}wasm32-unknown-unknown${pathSeparator}release${pathSeparator}lunistice_auto_splitter.wasm",
			],
			"dependsOn": "Build stable"
		},
		{
			"label": "Debug nightly",
			"type": "process",
			"problemMatcher": [],
			// Install the asr-debugger with:
			// cargo install --git https://github.com/CryZe/asr-debugger
			"command": "asr-debugger",
			"args": [
				"target${pathSeparator}wasm32-unknown-unknown${pathSeparator}release${pathSeparator}lunistice_auto_splitter.wasm",
			],
			"dependsOn": "Build nightly"
		}
	]
}
